{"version":3,"sources":["PhysicsManager.js"],"names":["cc","Class","extends","Component","properties","active","default","tooltip","aabb","pair","centerOfMass","joint","shape","mouseJoint","gravity","v2","onEnable","physicsManager","director","getPhysicsManager","enabled","warn","drawBits","PhysicsManager","DrawBits","CC_PREVIEW","debugDrawFlags","e_aabbBit","e_pairBit","e_centerOfMassBit","e_jointBit","e_shapeBit","onDisable"],"mappings":";;;;;;AACA;;;AAGAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACTC,gBAAQ;AACJC,qBAAS,IADL;AAEJC,qBAAS;AAFL,SADC;AAKTC,cAAK;AACDF,qBAAS,IADR;AAEDC,qBAAS;AAFR,SALI;AASTE,cAAM;AACFH,qBAAS;AADP,SATG;AAYTI,sBAAc;AACVJ,qBAAS,IADC;AAEVC,qBAAS;AAFC,SAZL;AAgBTI,eAAO;AACHL,qBAAS,IADN;AAEHC,qBAAS;AAFN,SAhBE;AAoBTK,eAAO;AACHN,qBAAS,IADN;AAEHC,qBAAS;AAFN,SApBE;AAwBTM,oBAAY;AACRP,qBAAS,KADD;AAERC,qBAAS;AAFD,SAxBH;AA4BTO,iBAAS;AACLR,qBAASN,GAAGe,EAAH,CAAM,CAAN,EAAQ,CAAC,GAAT,CADJ;AAELR,qBAAS;AAFJ;AA5BA,KAHP;;AAqCLS,YArCK,sBAqCM;AACP;AACA,YAAIC,iBAAiBjB,GAAGkB,QAAH,CAAYC,iBAAZ,EAArB;AACA,YAAIF,eAAeG,OAAf,IAA0B,KAAKf,MAAnC,EAA2C;AACvCL,eAAGqB,IAAH,CAAQ,iCAAR;AACH;AACDJ,uBAAeG,OAAf,GAAyB,KAAKf,MAA9B;;AAEA,YAAI,CAAC,KAAKA,MAAV,EAAkB;AACd;AACH;AACD;AACAY,uBAAeH,OAAf,GAAyB,KAAKA,OAA9B;;AAEA;AACA,YAAIQ,WAAWtB,GAAGuB,cAAH,CAAkBC,QAAjC;AACA,YAAIC,UAAJ,EAAgB;AACZR,2BAAeS,cAAf,GACA,CAAC,KAAKlB,IAAL,IAAac,SAASK,SAAvB,KACC,KAAKlB,IAAL,IAAaa,SAASM,SADvB,KAEC,KAAKlB,YAAL,IAAqBY,SAASO,iBAF/B,KAGC,KAAKlB,KAAL,IAAcW,SAASQ,UAHxB,KAIC,KAAKlB,KAAL,IAAcU,SAASS,UAJxB,CADA;AAMH,SAPD,MAOO;AACHd,2BAAeS,cAAf,GAAgC,CAAhC;AACH;AACJ,KA/DI;AAiELM,aAjEK,uBAiEO;AACR,YAAIf,iBAAiBjB,GAAGkB,QAAH,CAAYC,iBAAZ,EAArB;AACAF,uBAAeS,cAAf,GAAgC,CAAhC;AACAT,uBAAeG,OAAf,GAAyB,KAAzB;AACH;AArEI,CAAT","file":"PhysicsManager.js","sourceRoot":"..\\..\\..\\assets","sourcesContent":["\r\n/**\r\n * 物理引擎管理组件，开启各种调试\r\n */\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n       active: { \r\n           default: true,\r\n           tooltip: '是否启用物理引擎',\r\n       },\r\n       aabb:{\r\n           default: true,\r\n           tooltip: '是否显示包围盒',\r\n       },\r\n       pair: {\r\n           default: true,\r\n       },\r\n       centerOfMass: { \r\n           default: true,\r\n           tooltip: '是否显示中心点'\r\n       },\r\n       joint: { \r\n           default: true,\r\n           tooltip: '是否显示关节连接线'\r\n       },\r\n       shape: {\r\n           default: true,\r\n           tooltip: '是否填充形状'\r\n       },\r\n       mouseJoint: {\r\n           default: false,\r\n           tooltip: '是否开启鼠标关节，可以拖动动态刚体'\r\n       },\r\n       gravity: {\r\n           default: cc.v2(0,-960),\r\n           tooltip: '重力'\r\n       }\r\n    },\r\n\r\n    onEnable() {\r\n        //开启或关闭物理系统\r\n        let physicsManager = cc.director.getPhysicsManager();\r\n        if (physicsManager.enabled && this.active) {\r\n            cc.warn('The physical system is enabled！');\r\n        }\r\n        physicsManager.enabled = this.active;\r\n\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        //设置物理系统的重力属性\r\n        physicsManager.gravity = this.gravity;\r\n\r\n        //设置调试标志\r\n        let drawBits = cc.PhysicsManager.DrawBits;\r\n        if (CC_PREVIEW) {\r\n            physicsManager.debugDrawFlags = \r\n            (this.aabb && drawBits.e_aabbBit) |\r\n            (this.pair && drawBits.e_pairBit) |\r\n            (this.centerOfMass && drawBits.e_centerOfMassBit) |\r\n            (this.joint && drawBits.e_jointBit) |\r\n            (this.shape && drawBits.e_shapeBit);\r\n        } else {\r\n            physicsManager.debugDrawFlags = 0;\r\n        }  \r\n    },\r\n    \r\n    onDisable() {\r\n        let physicsManager = cc.director.getPhysicsManager();\r\n        physicsManager.debugDrawFlags = 0;\r\n        physicsManager.enabled = false;\r\n    }\r\n});\r\n"]}
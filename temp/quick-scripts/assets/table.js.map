{"version":3,"sources":["table.js"],"names":["cc","Class","extends","Component","properties","wballPrefab","Prefab","redBalls","_ballNum","winUI","Node","startUI","endUI","gameUI","ballLabel","Label","start","node","on","setTimeout","resetWhiteBall","resetTable","removeAllChildren","resetRedBalls","active","string","onBeginContact","contact","selfCollider","otherCollider","tag","name","emit","removeFromParent","instantiate","parent","lose"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAcL,GAAGM,MADT;AAERC,kBAAWP,GAAGM,MAFN;AAGRE,kBAAW,EAHH;AAIRC,eAAQT,GAAGU,IAJH;AAKRC,iBAAUX,GAAGU,IALL;AAMRE,eAAQZ,GAAGU,IANH;AAORG,gBAASb,GAAGU,IAPJ;AAQRI,mBAAYd,GAAGe;AARP,KAHP;;AAcL;;AAEA;;AAEAC,SAlBK,mBAkBI;AAAA;;AACL,aAAKC,IAAL,CAAUC,EAAV,CAAa,OAAb,EAAsB,UAACD,IAAD,EAAU;AAC5BE,uBAAW,YAAM;AACb,sBAAKC,cAAL;AACH,aAFD,EAEG,GAFH;AAGH,SAJD;AAKH,KAxBI;AA0BLC,cA1BK,wBA0BS;AACV,aAAKJ,IAAL,CAAUK,iBAAV,CAA4B,IAA5B;AACA,aAAKF,cAAL;AACA,aAAKG,aAAL;AACA,aAAKf,QAAL,GAAgB,EAAhB;AACA,aAAKC,KAAL,CAAWe,MAAX,GAAoB,KAApB;AACA,aAAKb,OAAL,CAAaa,MAAb,GAAsB,KAAtB;AACA,aAAKZ,KAAL,CAAWY,MAAX,GAAoB,KAApB;AACA,aAAKX,MAAL,CAAYW,MAAZ,GAAqB,IAArB;AACA,aAAKV,SAAL,CAAeW,MAAf,GAAwB,OAAO,KAAKjB,QAAZ,GAAuB,GAA/C;AACH,KApCI;AAsCLkB,kBAtCK,0BAsCUC,OAtCV,EAsCmBC,YAtCnB,EAsCiCC,aAtCjC,EAsCgD;AACjD;AACA,YAAID,aAAaE,GAAb,KAAqB,CAAzB,EAA4B;AACxB;AACA,gBAAID,cAAcZ,IAAd,CAAmBc,IAAnB,KAA4B,OAAhC,EAAyC;AACrC;AACA,qBAAKd,IAAL,CAAUe,IAAV,CAAe,OAAf,EAAwBH,cAAcZ,IAAtC;AACH,aAHD,MAIK;AACD;AACA,qBAAKT,QAAL;AACA,qBAAKM,SAAL,CAAeW,MAAf,GAAwB,OAAO,KAAKjB,QAAZ,GAAuB,GAA/C;AACA;AACA,oBAAI,KAAKA,QAAL,IAAiB,CAArB,EAAwB;AACpB,yBAAKK,MAAL,CAAYW,MAAZ,GAAqB,KAArB;AACA,yBAAKf,KAAL,CAAWe,MAAX,GAAoB,IAApB;AACH;AACJ;AACD;AACAK,0BAAcZ,IAAd,CAAmBgB,gBAAnB,CAAoC,IAApC;AACH;AACJ,KA3DI;AA6DLb,kBA7DK,4BA6Da;AACd,YAAIH,OAAOjB,GAAGkC,WAAH,CAAe,KAAK7B,WAApB,CAAX;AACAY,aAAKkB,MAAL,GAAc,KAAKlB,IAAnB;AACH,KAhEI;AAkELM,iBAlEK,2BAkEY;AACb,YAAIN,OAAOjB,GAAGkC,WAAH,CAAe,KAAK3B,QAApB,CAAX;AACAU,aAAKkB,MAAL,GAAc,KAAKlB,IAAnB;AACH,KArEI;AAuELmB,QAvEK,kBAuEG;AACJ,aAAKvB,MAAL,CAAYW,MAAZ,GAAqB,KAArB;AACA,aAAKZ,KAAL,CAAWY,MAAX,GAAoB,IAApB;AACH;;AAED;;AA5EK,CAAT","file":"table.js","sourceRoot":"..\\..\\..\\assets","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        wballPrefab : cc.Prefab,\n        redBalls : cc.Prefab,\n        _ballNum : 10,\n        winUI : cc.Node,\n        startUI : cc.Node,\n        endUI : cc.Node,\n        gameUI : cc.Node,\n        ballLabel : cc.Label\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        this.node.on(\"wball\", (node) => {\n            setTimeout(() => {\n                this.resetWhiteBall();\n            }, 100);\n        })\n    },\n\n    resetTable () {\n        this.node.removeAllChildren(true);\n        this.resetWhiteBall();\n        this.resetRedBalls();\n        this._ballNum = 10;\n        this.winUI.active = false;\n        this.startUI.active = false;\n        this.endUI.active = false;\n        this.gameUI.active = true;\n        this.ballLabel.string = \"剩余\" + this._ballNum + \"球\";\n    },\n\n    onBeginContact(contact, selfCollider, otherCollider) {\n        //如果Collider的组件tag为1时，也就是小球碰撞到代表袋口的碰撞体时\n        if (selfCollider.tag === 1) {\n            //如果是与白球发生碰撞\n            if (otherCollider.node.name === \"wball\") {\n                //发送通知重新生成白球，重置位置\n                this.node.emit(\"wball\", otherCollider.node);\n            }\n            else {\n                //红球数减1\n                this._ballNum--;\n                this.ballLabel.string = \"剩余\" + this._ballNum + \"球\";\n                //红球数小于等于0时，获得胜利\n                if (this._ballNum <= 0) {\n                    this.gameUI.active = false;\n                    this.winUI.active = true;\n                }\n            }\n            //将小球节点从场景树上移除\n            otherCollider.node.removeFromParent(true);\n        }\n    },\n\n    resetWhiteBall () {\n        var node = cc.instantiate(this.wballPrefab);\n        node.parent = this.node;\n    },\n\n    resetRedBalls () {\n        var node = cc.instantiate(this.redBalls);\n        node.parent = this.node;\n    },\n\n    lose () {\n        this.gameUI.active = false;\n        this.endUI.active = true;\n    }\n\n    // update (dt) {},\n});\n"]}
{"version":3,"sources":["wball.js"],"names":["cc","Class","extends","Component","properties","start","node","on","onCue","_sleep","event","parent","direction","convertToNodeSpaceAR","cue","sub","position","normalize","getComponent","RigidBody","linearVelocity","mul","Math","pow","abs","force","update","dt","awake","Canvas","instance","emit"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;;AAOL;;AAEA;;AAEAC,SAXK,mBAWI;AACL;AACA,aAAKC,IAAL,CAAUC,EAAV,CAAa,KAAb,EAAoB,KAAKC,KAAzB,EAAgC,IAAhC;AACA;AACA;AACA,aAAKC,MAAL,GAAc,IAAd;AACH,KAjBI;AAmBLD,SAnBK,iBAmBEE,KAnBF,EAmBS;AACV,YAAI,QAAQ,KAAKJ,IAAL,CAAUK,MAAtB,EAA8B;AAC1B;AACA,iBAAKF,MAAL,GAAc,KAAd;AACA;AACA,gBAAIG,YAAY,KAAKN,IAAL,CAAUK,MAAV,CAAiBE,oBAAjB,CAAsCH,MAAMI,GAA5C,CAAhB;AACAF,wBAAYA,UAAUG,GAAV,CAAc,KAAKT,IAAL,CAAUU,QAAxB,CAAZ;AACAJ,wBAAYA,UAAUK,SAAV,EAAZ;AACA;AACA,iBAAKX,IAAL,CAAUY,YAAV,CAAuBlB,GAAGmB,SAA1B,EAAqCC,cAArC,GAAsDR,UAAUS,GAAV,CAAc,CAACC,KAAKC,GAAL,CAAS,KAAT,EAAgBD,KAAKE,GAAL,CAASd,MAAMe,KAAf,CAAhB,CAAf,CAAtD;AACH;AACJ,KA9BI;AAgCLC,UAhCK,kBAgCGC,EAhCH,EAgCO;AACR,YAAI,CAAC,KAAKrB,IAAL,CAAUY,YAAV,CAAuBlB,GAAGmB,SAA1B,EAAqCS,KAAtC,IAA+C,CAAC,KAAKnB,MAAzD,EAAiE;AAC7D;AACA,iBAAKA,MAAL,GAAc,IAAd;AACAT,eAAG6B,MAAH,CAAUC,QAAV,CAAmBxB,IAAnB,CAAwByB,IAAxB,CAA6B,aAA7B;AACH;AACJ;AAtCI,CAAT","file":"wball.js","sourceRoot":"..\\..\\..\\assets","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        //监听击球事件“cue”\n        this.node.on(\"cue\", this.onCue, this);\n        //白球是否停止的标记，主要是用于使停止事件只发送一次\n        //白球的初始状态是停止的，因此设置为true\n        this._sleep = true;\n    },\n\n    onCue (event) {\n        if (this && this.node.parent) {\n            //白球没有停止，因此_sleep为false\n            this._sleep = false;\n            //计算白球运动的方向向量\n            var direction = this.node.parent.convertToNodeSpaceAR(event.cue);\n            direction = direction.sub(this.node.position);\n            direction = direction.normalize();\n            //根据方向和力度，计算并给予白球线速度\n            this.node.getComponent(cc.RigidBody).linearVelocity = direction.mul(-Math.pow(1.016, Math.abs(event.force)));\n        }\n    },\n\n    update (dt) {\n        if (!this.node.getComponent(cc.RigidBody).awake && !this._sleep) {\n            //白球从运动到停止，状态切换时，标记设置为true，并发送白球停止的事件\n            this._sleep = true;\n            cc.Canvas.instance.node.emit(\"wball-sleep\");\n        }\n    },\n});\n"]}